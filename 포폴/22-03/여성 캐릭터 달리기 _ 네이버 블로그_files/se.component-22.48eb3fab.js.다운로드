webpackJsonpSmartEditorViewer([22],{577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OglinkComponent=undefined;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}}();var r=n(199);function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var l=t.OglinkComponent=function(e){u(t,e);function t(e){var n=e.initData,i=e.config,r=e.componentConfig,u=e.instanceStatus;o(this,t);var l=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u));l._initVar(n,i);l._checkThumbnail(n);if(!l._canPlayYoutube(n,r)){l.__ON_READY_COMPONENT__("oglink");return a(l)}l._bindYoutubePlayEvent();l.__ON_READY_COMPONENT__("oglink");return l}i(t,[{key:"_initVar",value:function n(e,t){this._config=t||{};this._htData=e;this._$elWrap=$seJq("#"+e.id);this._$elThumbArea=this._$elWrap.find(".se-oglink-thumbnail")}},{key:"_checkThumbnail",value:function r(e){var t=new Image;t.onerror=this._onImageError.bind(this);t.src=e.thumbnail}},{key:"_onImageError",value:function l(){this._$elThumbArea&&this._$elThumbArea.remove()}},{key:"_canPlayYoutube",value:function f(e,t){var n=t.youtubePlay===true;return n&&e.isVideo&&e.thumbnail&&this._isYoutube(e.link)}},{key:"_isYoutube",value:function s(e){if(e.indexOf("youtube")>=0){return true}}},{key:"_bindYoutubePlayEvent",value:function c(){if(this._$elThumbArea){this._$elThumbArea.on("click",this._onClickThumb.bind(this))}}},{key:"_onClickThumb",value:function h(){if(this._htData.link.indexOf("v=")<0){return}if(this._$elThumbArea){var e=this._htData.link.split("v=")[1].split("&")[0];var t="https://www.youtube.com/embed/"+e;var n=$seJq("<iframe class='se-oglink-thumbnail-iframe' src='"+t+"?autoplay=1&autohide=1' frameborder='0'/>");this._$elThumbArea.append(n);this._bindEventAfterReplace()}return false}},{key:"_bindEventAfterReplace",value:function b(){if(this._$elThumbArea){this._$elThumbArea.find("iframe").on("load",function(){this.emit("onLoadOglink",this._htData)}.bind(this))}}}]);return t}(r.AbstractComponent);t["default"]=l}});